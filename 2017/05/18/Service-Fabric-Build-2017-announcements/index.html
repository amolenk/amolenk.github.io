
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Sander Molenkamp&#39;s Blog">
    <title>Service Fabric announcements at Build 2017 - Sander Molenkamp&#39;s Blog</title>
    <meta name="author" content="Sander Molenkamp">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="There were a lot of great Azure Service Fabric announcements at Build this year. Most importantly, you can now run Windows Server Containers on Service Fabric. Linux remains in public preview for now,">
<meta property="og:type" content="blog">
<meta property="og:title" content="Service Fabric announcements at Build 2017">
<meta property="og:url" content="http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/index.html">
<meta property="og:site_name" content="Sander Molenkamp's Blog">
<meta property="og:description" content="There were a lot of great Azure Service Fabric announcements at Build this year. Most importantly, you can now run Windows Server Containers on Service Fabric. Linux remains in public preview for now,">
<meta property="og:image" content="http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/SingleNodeCluster.png">
<meta property="og:image" content="http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/ApplicationInsightsInstrumentationKey.png">
<meta property="og:image" content="http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/ApplicationInsightsTelemetry.png">
<meta property="og:updated_time" content="2017-05-18T05:11:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Service Fabric announcements at Build 2017">
<meta name="twitter:description" content="There were a lot of great Azure Service Fabric announcements at Build this year. Most importantly, you can now run Windows Server Containers on Service Fabric. Linux remains in public preview for now,">
<meta name="twitter:image" content="http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/SingleNodeCluster.png">
<meta name="twitter:creator" content="@amolenk">
    
    
        
    
    
        <meta property="og:image" content="http://amolenk.com/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-quwccsthbllipo6252snb2tfkddvrsp1eczkytpz3vmxpsb6nwodixemlkux.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">Sander Molenkamp&#39;s Blog</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpg"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg"/>
            </a>
            <span class="sidebar-profile-name">Sander Molenkamp</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/amolenk" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/amolenk" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/in/amolenk" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Service Fabric announcements at Build 2017
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Thu May 18 2017 07:32:41 GMT+0200">
	
		    May 18, 2017
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>There were a lot of great Azure Service Fabric announcements at Build this year. Most importantly, you can now run Windows Server Containers on Service Fabric. Linux remains in public preview for now, but will be GA’ing soon in the next release. You can read all about these announcements over at the <a href="https://blogs.msdn.microsoft.com/azureservicefabric/2017/05/10/release-of-sdk-2-6-204-and-runtime-5-6-204-for-windows-and-a-preview-of-whats-next/" target="_blank" rel="external">Azure Service Fabric Team blog</a>.</p>
<p>There were two much smaller features that I especially liked though. Both are changes in the portal experience for creating new clusters.</p>
<a id="more"></a>
<p>First of all, there’s now an option to create a single node cluster in Azure. Previously the smallest size you could choose was a three node cluster. Now obviously you should not run your production workloads on a single node cluster, but this is great for dev/test clusters. On the current project I’m doing we’re often testing multiple features on separate (three node) clusters in the cloud. Scaling this back to single node clusters will save us a bunch of money.</p>
<p><img src="/2017/05/18/Service-Fabric-Build-2017-announcements/SingleNodeCluster.png" alt="SingleNodeCluster.png" title=""></p>

<p>Also note that single node clusters cannot be scaled out. So if for example you want to test your application fail-over, you’ll need to spin up a new cluster with more nodes.</p>
<p>The other feature I really like is out-of-the-box support for Application Insights. During cluster setup, you can now enter your Application Insights Instrumentation Key.</p>
<p><img src="/2017/05/18/Service-Fabric-Build-2017-announcements/ApplicationInsightsInstrumentationKey.png" alt="ApplicationInsightsInstrumentationKey.png" title=""></p>

<p>If you do this, all Service Fabric logging will be sent to your Application Insights instance. This includes Service Fabric system events, Reliable Services events and Reliable Actors events.</p>
<p><img src="/2017/05/18/Service-Fabric-Build-2017-announcements/ApplicationInsightsTelemetry.png" alt="ApplicationInsightsTelemetry.png" title=""></p>

<p>If you look at the ARM template that is generated by the wizard you can see how this is set up. The template already included a Windows Azure Diagnostics section that ensures that Service Fabric log events are written to Azure Table Storage. Now, if you’ve entered a valid Application Insights Instrumentation Key the ARM template will include an Application Insights sink to push those same events into your Application Insights instance.</p>
<pre>
{
  "name": "[concat('VMDiagnosticsVmExt','_vmNodeType0Name')]",
  "properties": {
    "type": "IaaSDiagnostics",
    "autoUpgradeMinorVersion": true,
    "protectedSettings": {
      "storageAccountName": "[parameters('applicationDiagnosticsStorageAccountName')]",
      "storageAccountKey": "[listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('applicationDiagnosticsStorageAccountName')),'2015-05-01-preview').key1]",
      "storageAccountEndPoint": "https://core.windows.net/"
    },
    "publisher": "Microsoft.Azure.Diagnostics",
    "settings": {
      "WadCfg": {
        "DiagnosticMonitorConfiguration": {
          "overallQuotaInMB": "50000",
          <mark>"sinks": "applicationInsights",</mark>
          "EtwProviders": {
            "EtwEventSourceProviderConfiguration": [
            {
              "provider": "Microsoft-ServiceFabric-Actors",
              "scheduledTransferKeywordFilter": "1",
              "scheduledTransferPeriod": "PT5M",
              "DefaultEvents": {
                "eventDestination": "ServiceFabricReliableActorEventTable"
              }
            },
            {
              "provider": "Microsoft-ServiceFabric-Services",
              "scheduledTransferPeriod": "PT5M",
              "DefaultEvents": {
              "eventDestination": "ServiceFabricReliableServiceEventTable"
            }
          }
        ],
        "EtwManifestProviderConfiguration": [
        {
          "provider": "cbd93bc2-71e5-4566-b3a7-595d8eeca6e8",
          "scheduledTransferLogLevelFilter": "Information",
          "scheduledTransferKeywordFilter": "4611686018427387904",
          "scheduledTransferPeriod": "PT5M",
          "DefaultEvents": {
            "eventDestination": "ServiceFabricSystemEventTable"
          }
        }
      ]
    }
  },
  <mark>"SinksConfig": {
    "Sink": [
      {
        "name": "applicationInsights",
        "ApplicationInsights": "[parameters('applicationInsightsKey')]"
      }
    ]
  }</mark>
}
</pre>

<p>Note that these are low level Service Fabric events. To push your application level logging into Application Insights you can either use the <a href="https://github.com/Azure/diagnostics-eventflow" target="_blank" rel="external">Microsoft Diagnostics EventFlow</a> library or directly use the Application Insights SDK. Using the SDK directly was discouraged due to performance issues, but at the Build conference the Service Fabric team assured us that those issues have been resolved.</p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Application-Insights/">Application Insights</a> <a class="tag tag--primary tag--small t-link" href="/tags/Azure-Service-Fabric/">Azure Service Fabric</a> <a class="tag tag--primary tag--small t-link" href="/tags/Build-2017/">Build 2017</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/05/18/dotnetFlix-at-Build-2017/" data-tooltip="dotnetFlix at Build 2017">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 Sander Molenkamp. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/05/18/dotnetFlix-at-Build-2017/" data-tooltip="dotnetFlix at Build 2017">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://amolenk.com/2017/05/18/Service-Fabric-Build-2017-announcements/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg"/>
        
            <h4 id="about-card-name">Sander Molenkamp</h4>
        
            <h5 id="about-card-bio"><p>Sander Molenkamp is a Solution Architect at <a href="http://www.infosupport.com">Info Support</a> with a passion for cloud native architectures. He’s a Microsoft Azure aficionado and a Microsoft Competence Center lead within Info Support, where amongst other things he enjoys co-hosting the <a href="http://www.dotnetflix.com">dotnetFlix</a> podcast. Sander likes to travel, read books and lives in Heiloo in the Netherlands, with his wife, daughter and cat.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Solution Architect</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                The Netherlands
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/scrip-rjanlllosg30d03qrddpwrs6wqf4k3v0bbo68hiifuvthyhqfefx2htcagu0.min.js"></script>
<!--SCRIPTS END-->

    



</html>
